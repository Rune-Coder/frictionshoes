{"version":3,"sources":["pages/signIn/otp.module.css","pages/signIn/otp.js","image/sectionLoader.gif","icons/closeIcon.js","card/notificationCard.js","card/notificationCard.module.css","card/toastCard.module.css","icons/checkIcon.js","card/toastCard.js"],"names":["module","exports","Otp","props","useEffect","document","title","window","scrollTo","location","useLocation","navigate","useNavigate","useState","sec","setSec","otpLen","setOtpLen","showToast","setShowToast","otp","setOtp","updated","setUpdated","loader","setLoader","getOtpEmail","state","email","src","preloader","className","classes","load","alt","autoFocus","seq","final","getElementById","value","length","focus","a","fetch","method","headers","body","JSON","stringify","res","json","data","ok","password","setTimeout","getOtp","finalOtp","Number","changePassword","otpHandler","event","target","layout","toast","close","rem","head","subHead","otpDetails","type","maxLength","required","id","textBox","onKeyUp","onChange","resendTimer","slice","resend","onClick","CloseIcon","xmlns","viewBox","d","NotificationCard","notificationHolder","msg","CheckIcon","ToastCard","checkBox","check","progress"],"mappings":"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","file":"static/js/10.35898602.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"head\":\"otp_head__32Edg\",\"layout\":\"otp_layout__3hz8s\",\"otpDetails\":\"otp_otpDetails__2dhbV\",\"resend\":\"otp_resend__1dYjp\",\"resendTimer\":\"otp_resendTimer__2z_-U\",\"subHead\":\"otp_subHead__dJDTk\",\"textBox\":\"otp_textBox__1HiTB\",\"toast\":\"otp_toast__1p6Rc\",\"confirmToast\":\"otp_confirmToast__1J4gL\"};","import React, { useState, useEffect } from 'react';\n\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport NotificationCard from '../../card/notificationCard';\nimport preloader from '../../image/sectionLoader.gif';\nimport ToastCard from '../../card/toastCard';\nimport classes from './otp.module.css';\n\nfunction Otp(props){\n\n    useEffect(() => {\n        document.title = 'Online Shopping site for shoes in India | Friction';\n        window.scrollTo(0, 0);\n    });\n\n    const location = useLocation();\n\n    let navigate = useNavigate();\n\n\n    const [sec, setSec] = useState(60);\n    const [otpLen, setOtpLen] = useState(0);\n    const [showToast, setShowToast] = useState(false);\n    const [otp, setOtp] = useState(0);\n    const [updated, setUpdated] = useState(false);\n    const [loader, setLoader] = useState(false);\n\n\n    useEffect(() =>{\n        if(otp === 0)\n            getOtpEmail(location.state.email);\n    }, [otp, location.state.email]);\n\n\n    if(!location.state){\n        return(\n            <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>\n        );\n    }\n\n    function autoFocus(seq, final){\n        const initial = document.getElementById(seq);\n        if(initial.value.length)\n            document.getElementById(final).focus();\n        return;\n    }\n\n    async function getOtpEmail(email){\n        const res = await fetch(\"/api/user/send-otp\", {\n            method: \"POST\",\n            headers:{\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({ email })\n        });\n    \n        const data = await res.json();\n            \n        if(res.ok && data)\n            setOtp(data);\n    }\n\n    function otpResend(event){\n        setSec(60);\n        setOtp(0);\n        if(otp === 0)\n            getOtpEmail(location.state.email);\n        return;\n    }\n\n    async function  changePassword(email, password){\n\n        setLoader(true);\n\n        const res = await fetch(\"/api/user/update-password\", {\n            method: \"POST\",\n            headers:{\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({ email, password })\n        });\n\n        await res.json();\n\n        setLoader(false);\n        if(res.ok){\n            setUpdated(true);\n            setTimeout(function(){ setUpdated(false);}, 3000);\n            setTimeout(function(){ navigate(`/`);}, 3500);\n        }\n    }\n\n    function getOtp(){\n        const finalOtp = document.getElementById(\"first\").value+\n        document.getElementById(\"sec\").value+\n        document.getElementById(\"third\").value+\n        document.getElementById(\"fourth\").value+\n        document.getElementById(\"fifth\").value+\n        document.getElementById(\"sixth\").value;\n\n        if(Number(finalOtp) === otp){\n            \n            changePassword(location.state.email, location.state.password);\n            return;\n        }\n        else{\n            setShowToast(true);\n            setTimeout(function(){ setShowToast(false); }, 3000);\n            return;\n        }\n    }\n\n    function otpHandler(event){\n        const no = event.target.value;\n\n        if(no === \"\" && otpLen !== 0)\n            setOtpLen(otpLen-1);\n        else{\n            if(otpLen === 5)\n                getOtp();\n            setOtpLen(otpLen+1);\n        }\n\n        return;\n    }\n\n    function timer(){\n        setSec(sec-1);\n        return;\n    }\n    function remToast(rem){\n        setShowToast(false);\n        return;\n    } \n\n    if(sec > 0)\n        setTimeout(timer, 1000);\n\n    return(\n        <div className={classes.layout}>\n        <div>\n            {showToast && <div className={classes.toast}> <ToastCard close = {remToast} value = \"Incorrect OTP\" /> </div>}\n            <form>\n                <p className={classes.head}>Verify with OTP</p>\n                <p className={classes.subHead}>Sent to {location.state.email}</p>\n                <div className={classes.otpDetails}>\n                    <input \n                        type= \"text\" \n                        maxLength= \"1\"\n                        required \n                        id= {\"first\"}\n                        className={classes.textBox}\n                        onKeyUp={() => autoFocus(\"first\", 'sec')}\n                        onChange = {otpHandler}\n                        >\n                    </input>\n                    <input \n                        type= \"text\" \n                        maxLength= \"1\"\n                        required \n                        id= {\"sec\"}\n                        className={classes.textBox}\n                        onKeyUp={() => autoFocus(\"sec\", 'third')}\n                        onChange = {otpHandler}\n                        >\n                    </input>\n                    <input \n                        type= \"text\" \n                        maxLength= \"1\"\n                        required \n                        id= {\"third\"}\n                        className={classes.textBox}\n                        onKeyUp={() => autoFocus(\"third\", 'fourth')}\n                        onChange = {otpHandler}\n                        >\n                    </input>\n                    <input \n                        type= \"text\" \n                        maxLength= \"1\"\n                        required \n                        id= {\"fourth\"}\n                        className={classes.textBox}\n                        onKeyUp={() => autoFocus(\"fourth\", 'fifth')}\n                        onChange = {otpHandler}\n                        >\n                    </input>\n                    <input \n                        type= \"text\" \n                        maxLength= \"1\"\n                        required \n                        id= {\"fifth\"}\n                        className={classes.textBox}\n                        onKeyUp={() => autoFocus(\"fifth\", 'sixth')}\n                        onChange = {otpHandler}\n                        >\n                    </input>\n                    <input \n                        type= \"text\" \n                        maxLength= \"1\"\n                        required \n                        id= {\"sixth\"}\n                        className={classes.textBox}\n                        onChange = {otpHandler}\n                        >\n                    </input>\n                </div>\n                {sec > 0 && <p className={classes.resendTimer}>Resend OTP in 00:{(\"0\" + sec).slice(-2)}</p>}\n                {!sec && <p className={classes.resend} onClick = {otpResend}>RESEND OTP</p>}\n            </form>\n            {updated && <NotificationCard value = {\"Password Updated Successfully\"} />}\n            {loader && <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>}\n        </div>\n        </div>\n    );\n}\n\nexport default Otp;","export default __webpack_public_path__ + \"static/media/sectionLoader.f418ba14.gif\";","import React from 'react';\n\nfunction CloseIcon(){\n    return(\n        <svg \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 320 512\">\n            <path d=\"M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z\"/>\n        </svg>\n    );\n}\n\nexport default CloseIcon;","import React from 'react';\n\nimport classes from './notificationCard.module.css';\n\nfunction NotificationCard(props){\n\n    return(\n        <div className={classes.notificationHolder}>\n        <div className={classes.layout}>\n            <p className={classes.msg}>{props.value}</p>\n        </div>  \n        </div>\n    );\n}\n\nexport default NotificationCard","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"notificationCard_layout__1CJR0\",\"notificationHolder\":\"notificationCard_notificationHolder__3kfqx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"check\":\"toastCard_check__alAM9\",\"close\":\"toastCard_close__21bLR\",\"checkBox\":\"toastCard_checkBox__3Kh7q\",\"layout\":\"toastCard_layout__2xQzC\",\"msg\":\"toastCard_msg__2q8OK\",\"progress\":\"toastCard_progress__2c5kH\",\"bar\":\"toastCard_bar__i64JY\"};","import React from 'react';\n\nfunction CheckIcon(){\n    return(\n        <svg \n            xmlns=\"http://www.w3.org/2000/svg\" \n            viewBox=\"0 0 448 512\">\n            <path d=\"M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z\"/>\n        </svg>\n    );\n}\n\nexport default CheckIcon;","import React from 'react';\n\nimport CheckIcon from '../icons/checkIcon';\nimport CloseIcon from '../icons/closeIcon';\nimport classes from './toastCard.module.css';\n\nfunction ToastCard(props){\n    function closeHandler(event){\n        props.close(1);\n    }\n\n    return(\n        <div className={classes.layout}>\n            <span className={classes.close} onClick={closeHandler}><CloseIcon /></span>\n            <div className={classes.checkBox}><span className={classes.check}><CheckIcon /></span></div>\n            <p className={classes.msg}>{props.value}</p>\n            <div className={classes.progress}></div>\n        </div>\n    );\n}\n\nexport default ToastCard;"],"sourceRoot":""}