{"version":3,"sources":["pages/payment/paymentOptions.module.css","pages/payment/payment.module.css","pages/payment/paymentOptions.js","pages/payment/payment.js","image/sectionLoader.gif","pages/cart/checkoutMenu.js","pages/cart/checkoutMenu.module.css"],"names":["module","exports","PaymentOptions","props","bill","localStorage","getItem","JSON","parse","amount","products","address","useSelector","state","currAddress","userSub","login","userData","useState","loader","setLoader","navigate","useNavigate","dispatch","useDispatch","orders","setOrders","ops","setOps","email","a","cart","fetch","method","headers","body","stringify","res","json","data","ok","console","log","rzp_key","rzpKeyData","options","key","currency","name","description","image","order_id","id","callback_url","prefill","mobile","notes","theme","window","Razorpay","open","useEffect","getOrders","className","classes","paymentCard","summary","paymentOps","onClick","selectOps","check","subHead","event","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","currOrder","slice","push","status","payment","date","postOrders","addressActions","remAddress","replace","onlinePay","continue","src","preloader","load","alt","Payment","document","title","scrollTo","value","layout","CheckoutMenu","menu","menuList","active","line"],"mappings":"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","file":"static/js/14.b9fded8a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"check\":\"paymentOptions_check__2sGBP\",\"continue\":\"paymentOptions_continue__33dQ9\",\"load\":\"paymentOptions_load__p6Q7I\",\"paymentCard\":\"paymentOptions_paymentCard__1pG-E\",\"paymentOps\":\"paymentOptions_paymentOps__3Xehf\",\"selectOps\":\"paymentOptions_selectOps__2Og3T\",\"subHead\":\"paymentOptions_subHead__DHait\",\"summary\":\"paymentOptions_summary__33_qA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"layout\":\"payment_layout__3Inq1\"};","import React, { useState, useEffect } from 'react';\n\nimport { useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport BadgeCheckIcon from '../../icons/badgeCheckIcon';\nimport classes from './paymentOptions.module.css';\nimport { addressActions } from '../../store/addressStore';\nimport preloader from '../../image/sectionLoader.gif';\n\nfunction PaymentOptions(props){\n    const bill = localStorage.getItem(\"billStore\") ? JSON.parse(localStorage.getItem(\"billStore\")) : [{amount: 0}];\n    const products = localStorage.getItem(\"products\") ? JSON.parse(localStorage.getItem(\"products\")) : [];\n    const address = useSelector((state) => state.address.currAddress);\n    const userSub = useSelector((state) => state.login.userData);\n    const [loader, setLoader] = useState(false);\n    let navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const [orders, setOrders] = useState([]);\n    const [ops, setOps] = useState(\" \");\n\n    useEffect(() =>{\n\n        //get orders data mongodb\n        async function getOrders(email){\n\n            const res = await fetch(\"/api/user/history-get\", {\n                method: \"POST\",\n                headers:{\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({ email })\n            });\n        \n            const data = await res.json();\n                \n            if(res.ok && data.orders)\n                setOrders(data.orders);\n\n        }\n        getOrders(userSub.email);\n\n    }, [userSub.email]);\n\n    //post orders\n    async function postOrders(email, orders){\n\n        const cart = [];\n        const bill = [];\n        const res = await fetch(\"/api/user/history-create\", {\n            method: \"POST\",\n            headers:{\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({ email, cart, bill, orders })\n        });\n    \n        await res.json();\n\n    }\n\n    function toOrders(){\n        navigate(`/orders`, { replace: true });\n    }\n\n    async function onlinePay(amount){\n\n        setLoader(true);\n\n        const res = await fetch(\"/api/payment/checkout\", {\n            method: \"POST\",\n            headers:{\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({ amount })\n        });\n    \n        const data = await res.json();\n            \n        if(res.ok && data)\n            console.log(data);\n        else\n            return;\n\n        const rzp_key = await fetch(\"/api/payment/key\", {\n            method: \"GET\",\n            headers:{\n                \"Content-Type\": \"application/json\"\n            }\n        });\n\n        const rzpKeyData = await rzp_key.json();\n\n        if(!rzp_key.ok || !rzpKeyData)\n            return;\n        setLoader(false);\n        const options = {\n            key: rzpKeyData, \n            amount: data.amount, \n            currency: \"INR\",\n            name: \"Friction\",\n            description: \"Online Shopping site for Shoes in India\",\n            image: \"/images/icon.png\",\n            order_id: data.id, \n            callback_url: \"/api/payment/verification\",\n            prefill: {\n                \"name\": userSub.name,\n                \"email\": userSub.email,\n                \"contact\": userSub.mobile\n            },\n            notes: {\n                \"address\": \"Razorpay Corporate Office\"\n            },\n            theme: {\n                \"color\": \"#446A46\"\n            }\n        };\n        var razor = new window.Razorpay(options);\n        razor.open();\n    }\n\n    function pay(event){\n\n        if(ops === \" \")\n            return;\n        else if(ops === \"cash\"){\n\n            var today = new Date();\n            var dd = String(today.getDate()).padStart(2, '0');\n            var mm = String(today.getMonth() + 1).padStart(2, '0');\n            var yyyy = today.getFullYear();\n\n            today = dd + '/' + mm + '/' + yyyy;\n\n            var currOrder = orders.slice();\n            currOrder.push({\n                order_id: \"\",\n                status: \"processing\",\n                bill: bill,\n                products: products,\n                payment: \"Cash\",\n                address: address,\n                date: today\n            });\n\n            postOrders(userSub.email, currOrder);\n\n            dispatch(addressActions.remAddress());\n\n            toOrders();\n\n        }\n        else{\n            onlinePay(bill[0].amount);\n        }\n    }\n\n    return(\n        <div className={classes.paymentCard}>\n            <div className={classes.summary}>\n                Order Total &#8377; {bill[0].amount}\n            </div>\n            PAYMENT OPTIONS\n            <ul className={classes.paymentOps}>\n                <li onClick = {() => setOps(\"cash\")}>\n                    <div className={classes.selectOps}>Cash On Delivery\n                    {ops === \"cash\" && <span className={classes.check}><BadgeCheckIcon /></span>}</div>\n                </li>\n                <li onClick = {() => setOps(\"online\")}>  \n                    <div className={classes.selectOps}>Pay Now\n                    {ops === \"online\" && <span className={classes.check}><BadgeCheckIcon /></span>}</div>\n                    <div className={classes.subHead}>Debit Card, Credit Card, Net Banking, UPI</div>\n                </li>\n                <li><button onClick = {pay} className={classes.continue}>CONTINUE</button></li>\n                \n            </ul>\n            {loader && <img src = {preloader} className={classes.load} alt = \"Loading...\"></img>}\n        </div>\n    );\n}\n\nexport default PaymentOptions;","import React, { useEffect } from 'react';\n\nimport CheckoutMenu from '../cart/checkoutMenu';\nimport PaymentOptions from './paymentOptions';\nimport classes from './payment.module.css';\n\n\nfunction Payment(props){\n\n    useEffect(() => {\n        document.title = 'PAYMENT';\n        window.scrollTo(0, 0);\n    });\n\n    return(\n        <div>\n            <div>\n                <CheckoutMenu value = \"pay\" />\n            </div>\n            <div className={classes.layout}>\n                <PaymentOptions />\n            </div>\n        </div>\n    );\n}\n\nexport default Payment;","export default __webpack_public_path__ + \"static/media/sectionLoader.f418ba14.gif\";","import React from 'react';\nimport classes from './checkoutMenu.module.css';\n\nfunction CheckoutMenu(props){\n    return(\n        <div className={classes.menu}>\n            <ul className={classes.menuList}>\n                <li className={props.value === \"bag\" ? classes.active : ''}>B A G</li>\n                <li><hr className={classes.line} /></li>\n                <li className={props.value === \"add\" ? classes.active : ''}>A D D R E S S</li>\n                <li><hr className={classes.line} /></li>\n                <li className={props.value === \"pay\" ? classes.active : ''}>P A Y M E N T</li>\n            </ul>\n        </div>\n    );\n}\n\nexport default CheckoutMenu;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"active\":\"checkoutMenu_active__jsDOv\",\"line\":\"checkoutMenu_line__3uD4a\",\"menu\":\"checkoutMenu_menu__19hE2\",\"menuList\":\"checkoutMenu_menuList__3CRLH\"};"],"sourceRoot":""}